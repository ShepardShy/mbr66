import{k as b,s as F,n as y,o,c,a as g,u as k,t as x,g as f,w as B,bB as E,b as $,bt as w,a0 as h,aF as U}from"./entry.1f11dde8.js";import{F as R,a as T}from"./FormLabel.c2b77cc7.js";import{F as A}from"./Select.7e74992a.js";const C={class:"textarea"},S=["disabled","value","placeholder","id"],N={class:"textarea__mirror"},M={__name:"TextareaField",props:{item:{default:{id:0,key:"",value:"",type:"text",placeholder:"",title:"Undefined title"},type:Object},disabled:{default:!1,type:Boolean},mask:{default:null,type:String},isUseEnter:{default:!0,type:Boolean}},emits:["changeValue"],setup(d,{emit:t}){let l=b(""),a=b(null);const r=t,e=d,_=s=>{const u=n=>{let i="^";n=n.replace(/[\s()\-+]/g,"");for(let v of n)switch(v){case"#":i+="[0-9]{1}";break;case"A":i+="[а-яa-zА-ЯA-Z]{1}";break;default:Number(v)!=NaN&&(i+="[\\d]{1}");break}return i+="$",new RegExp(i)},m=()=>/\n/i.test(s),V=()=>{let n=null,i=null;return s.length>e.mask.length?!1:(n=e.mask.replaceAll(" ","").substring(0,s.length),i=u(n),!!i.test(s))};(()=>{if(!e.isUseEnter&&m()){a.value.value=l.value;return}if(e.mask!=""&&![void 0,null].includes(e.mask))if(V())l.value=s;else{a.value.value=l.value;return}else l.value=s;r("changeValue",{key:e.item.key,value:s})})(),p()};F(()=>{e.isUseEnter?l.value=e.item.value:l.value=e.item.value!=null?String(e.item.value).replaceAll(`
`,""):e.item.value,new ResizeObserver(p).observe(a.value),e.item.focus&&a.value.focus()});const p=()=>{if(a.value!=null){let s=a.value.closest(".textarea").querySelector(".textarea__mirror");s.style.height="1px",s.style.height=6+a.value.scrollHeight+"px"}};return y(()=>e.item.value,()=>{e.isUseEnter?l.value=e.item.value:l.value=e.item.value!=null?String(e.item.value).replaceAll(`
`,""):e.item.value}),y(()=>e.item.focus,()=>{e.item.focus&&a.value.focus()}),(s,u)=>(o(),c("div",C,[g("textarea",{type:"text",ref_key:"textareaRef",ref:a,autocomplete:"off",disabled:e.disabled,value:k(l),placeholder:e.item.placeholder,id:`input_${e.item.id}`,onInput:u[0]||(u[0]=m=>_(m.target.value)),onBlur:u[1]||(u[1]=m=>r("blur",m))}," ",40,S),g("pre",N,x(k(l)),1)]))}},O=M,q={key:2,class:"form-item__substring"},z=["href"],I={__name:"Textarea",props:{item:{default:{id:0,key:"",title:"",value:"",type:"text",focus:!1,substring:"",placeholder:""},type:Object},disabled:{default:!1,type:Boolean},mask:{default:null,type:String},isUseEnter:{default:!0,type:Boolean},isReadOnly:{default:!1,type:Boolean}},setup(d){const t=d;return(l,a)=>(o(),f(T,{class:U(["form-item__textarea",[null,void 0].includes(t.item.value)||t.item.value==""?"form-item__textarea_empty":""]),required:t.item.required},{default:B(()=>[E($(R,{title:t.item.title},null,8,["title"]),[[w,t.item.title!=null&&t.item.title!=""]]),t.isReadOnly?(o(),f(A,{key:0,value:t.item.value,isHTML:!0},null,8,["value"])):(o(),f(O,{key:1,item:t.item,mask:t.item.type=="number"?"#######################":t.mask,disabled:t.disabled,isUseEnter:t.isUseEnter,onFocus:a[0]||(a[0]=r=>l.$emit("focus",r)),onBlur:a[1]||(a[1]=r=>l.$emit("blur",r)),onChangeValue:a[2]||(a[2]=r=>l.$emit("changeValue",r))},null,8,["item","mask","disabled","isUseEnter"])),![null,void 0].includes(t.item.substring)&&t.item.substring!=""?(o(),c("span",q,x(t.item.substring),1)):h("",!0),t.item.key=="phone"&&l.saveValueForCall!=null&&l.saveValueForCall!=""?(o(),c("a",{key:3,href:`tel:${l.saveValueForCall}`,class:"button-text button-text__action"}," Позвонить ",8,z)):h("",!0)]),_:1},8,["class","required"]))}},Z=I;export{Z as A};
